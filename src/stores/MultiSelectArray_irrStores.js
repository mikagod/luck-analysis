// 导入文字图片
import move_omens from '/assets/image/img/font_blue/recent_luck/搬迁事情的吉凶预兆.png';
import fortune from '/assets/image/img/font_blue/recent_luck/财运如何.png';
import work_promotion from '/assets/image/img/font_blue/recent_luck/工作官运.png';
import company_development from '/assets/image/img/font_blue/recent_luck/公司发展.png';
import investment from '/assets/image/img/font_blue/recent_luck/投资.png';
import emotional_experience_marriage from '/assets/image/img/font_blue/recent_luck/情感体验和婚姻婚外情.png';
import interpersonal_relationships from '/assets/image/img/font_blue/recent_luck/人际关系.png';
import who_can_help from '/assets/image/img/font_blue/recent_luck/谁能帮你解决问题.png';
import seeking_assistance from '/assets/image/img/font_blue/recent_luck/求人办事.png';
import bearing_children from '/assets/image/img/font_blue/recent_luck/生育子女.png';
import physical_mental_health from '/assets/image/img/font_blue/recent_luck/身心健康.png';
import medical_treatment from '/assets/image/img/font_blue/recent_luck/伤病治疗.png';
import marriage from '/assets/image/img/font_blue/recent_luck/嫁娶.png';
import official_disputes from '/assets/image/img/font_blue/recent_luck/官灾是非.png';
import learning_exams from '/assets/image/img/font_blue/recent_luck/学习考试过关.png';
import travel from '/assets/image/img/font_blue/recent_luck/旅游出行.png';
import vehicle_use from '/assets/image/img/font_blue/recent_luck/车辆使用.png';
import buying_renting_houses from '/assets/image/img/font_blue/recent_luck/买卖房屋.png';
import ancestral_grave_relocation from '/assets/image/img/font_blue/recent_luck/迁移祖先坟墓.png';
import feng_shui_changes from '/assets/image/img/font_blue/recent_luck/风水变化.png';
import lost_items from '/assets/image/img/font_blue/recent_luck/失物找寻.png';
import tattoos_scars from '/assets/image/img/font_blue/recent_luck/纹身（伤疤）.png';
import making_new_friends_contacting_old_friends from '/assets/image/img/font_blue/recent_luck/结交新友联络旧友.png';
import helping_others from '/assets/image/img/font_blue/recent_luck/帮助他人.png';
import unfair_improper_actions from '/assets/image/img/font_blue/recent_luck/做了不公平不正当甚至是害人的事情.png';
import resignation from '/assets/image/img/font_blue/recent_luck/辞职.png';
import skill_enhancement from '/assets/image/img/font_blue/recent_luck/技能修养提升.png';
import living_with_others from '/assets/image/img/font_blue/recent_luck/与人同室居住.png';
import family_member_passing from '/assets/image/img/font_blue/recent_luck/亲人去世.png';
import harming_animals from '/assets/image/img/font_blue/recent_luck/杀害伤害动物.png';
import loss_damage_of_items from '/assets/image/img/font_blue/recent_luck/物品的丢失损毁.png';
import adopting_abandoning_animals from '/assets/image/img/font_blue/recent_luck/收养（或弃养）动物.png';
import losing_people_pets from '/assets/image/img/font_blue/recent_luck/人和动物与你走失.png';
import weather_impact_on_major_events from '/assets/image/img/font_blue/recent_luck/做大事时的天气影响.png';


import move_omens_white from '/assets/image/img/font_white/recent_luck/搬迁事情的吉凶预兆.png';
import fortune_white from '/assets/image/img/font_white/recent_luck/财运如何.png';
import work_promotion_white from '/assets/image/img/font_white/recent_luck/工作官运.png';
import company_development_white from '/assets/image/img/font_white/recent_luck/公司发展.png';
import investment_white from '/assets/image/img/font_white/recent_luck/投资.png';
import emotional_experience_marriage_white from '/assets/image/img/font_white/recent_luck/情感体验和婚姻婚外情.png';
import interpersonal_relationships_white from '/assets/image/img/font_white/recent_luck/人际关系.png';
import who_can_help_white from '/assets/image/img/font_white/recent_luck/谁能帮你解决问题.png';
import seeking_assistance_white from '/assets/image/img/font_white/recent_luck/求人办事.png';
import bearing_children_white from '/assets/image/img/font_white/recent_luck/生育子女.png';
import physical_mental_health_white from '/assets/image/img/font_white/recent_luck/身心健康.png';
import medical_treatment_white from '/assets/image/img/font_white/recent_luck/伤病治疗.png';
import marriage_white from '/assets/image/img/font_white/recent_luck/嫁娶.png';
import official_disputes_white from '/assets/image/img/font_white/recent_luck/官灾是非.png';
import learning_exams_white from '/assets/image/img/font_white/recent_luck/学习考试过关.png';
import travel_white from '/assets/image/img/font_white/recent_luck/旅游出行.png';
import vehicle_use_white from '/assets/image/img/font_white/recent_luck/车辆使用.png';
import buying_renting_houses_white from '/assets/image/img/font_white/recent_luck/买卖房屋.png';
import ancestral_grave_relocation_white from '/assets/image/img/font_white/recent_luck/迁移祖先坟墓.png';
import feng_shui_changes_white from '/assets/image/img/font_white/recent_luck/风水变化.png';
import lost_items_white from '/assets/image/img/font_white/recent_luck/失物找寻.png';
import tattoos_scars_white from '/assets/image/img/font_white/recent_luck/纹身（伤疤）.png';
import making_new_friends_contacting_old_friends_white from '/assets/image/img/font_white/recent_luck/结交新友联络旧友.png';
import helping_others_white from '/assets/image/img/font_white/recent_luck/帮助他人.png';
import unfair_improper_actions_white from '/assets/image/img/font_white/recent_luck/做了不公平不正当甚至是害人的事情.png';
import resignation_white from '/assets/image/img/font_white/recent_luck/辞职.png';
import skill_enhancement_white from '/assets/image/img/font_white/recent_luck/技能修养提升.png';
import living_with_others_white from '/assets/image/img/font_white/recent_luck/与人同室居住.png';
import family_member_passing_white from '/assets/image/img/font_white/recent_luck/亲人去世.png';
import harming_animals_white from '/assets/image/img/font_white/recent_luck/杀害伤害动物.png';
import loss_damage_of_items_white from '/assets/image/img/font_white/recent_luck/物品的丢失损毁.png';
import adopting_abandoning_animals_white from '/assets/image/img/font_white/recent_luck/收养（或弃养）动物.png';
import losing_people_pets_white from '/assets/image/img/font_white/recent_luck/人和动物与你走失.png';
import weather_impact_on_major_events_white from '/assets/image/img/font_white/recent_luck/做大事时的天气影响.png';

// 导入图标（选中、未选中）
import unChooseIcon from '/assets/image/img/未选.png'; // 未选图标
import hvChooseIcon from '/assets/image/img/已选.png'; // 已选图标

// 定义背景颜色（选中、未选中）
const bgColor = {
  hvBgColor: '#00d0d4', // 已选背景颜色 
  unBgColor: '#e3fdfe', // 未选背景颜色
} 

// 导入库
import { defineStore } from 'pinia';
import { ref, onUnmounted} from 'vue';


export const useSelected_irrStore = defineStore('selected_irr', () => {

        // 黑字图片（未选中）
        const imgUrlArray = ref([
            fortune,
            work_promotion,
            company_development,
            investment,
            interpersonal_relationships,
            helping_others,
            emotional_experience_marriage,
            who_can_help,
            seeking_assistance,
            bearing_children,
            physical_mental_health,
            medical_treatment,
            marriage,
            official_disputes,
            learning_exams,
            travel,
            vehicle_use,
            buying_renting_houses,
            ancestral_grave_relocation,
            feng_shui_changes,
            move_omens,
            lost_items,
            tattoos_scars,
            resignation,
            making_new_friends_contacting_old_friends,
            unfair_improper_actions,
            skill_enhancement,
            living_with_others,
            family_member_passing,
            adopting_abandoning_animals,
            losing_people_pets,
            weather_impact_on_major_events,
            harming_animals,
            loss_damage_of_items,
        ]);
        // 备份 黑字图片（未选中） 
        const imgUrlArray_backup = ref([
            fortune,
            work_promotion,
            company_development,
            investment,
            interpersonal_relationships,
            helping_others,
            emotional_experience_marriage,
            who_can_help,
            seeking_assistance,
            bearing_children,
            physical_mental_health,
            medical_treatment,
            marriage,
            official_disputes,
            learning_exams,
            travel,
            vehicle_use,
            buying_renting_houses,
            ancestral_grave_relocation,
            feng_shui_changes,
            move_omens,
            lost_items,
            tattoos_scars,
            resignation,
            making_new_friends_contacting_old_friends,
            unfair_improper_actions,
            skill_enhancement,
            living_with_others,
            family_member_passing,
            adopting_abandoning_animals,
            losing_people_pets,
            weather_impact_on_major_events,
            harming_animals,
            loss_damage_of_items,
        ]); 
        // 白字图片（选中）
        const imgUrlArray_white = ref([
            fortune_white,
            work_promotion_white,
            company_development_white,
            investment_white,
            interpersonal_relationships_white,
            helping_others_white,
            emotional_experience_marriage_white,
            who_can_help_white,
            seeking_assistance_white,
            bearing_children_white,
            physical_mental_health_white,
            medical_treatment_white,
            marriage_white,
            official_disputes_white,
            learning_exams_white,
            travel_white,
            vehicle_use_white,
            buying_renting_houses_white,
            ancestral_grave_relocation_white,
            feng_shui_changes_white,
            move_omens_white,
            lost_items_white,
            tattoos_scars_white,
            resignation_white,
            making_new_friends_contacting_old_friends_white,
            unfair_improper_actions_white,
            skill_enhancement_white,
            living_with_others_white,
            family_member_passing_white,
            adopting_abandoning_animals_white,
            losing_people_pets_white,
            weather_impact_on_major_events_white,
            harming_animals_white,
            loss_damage_of_items_white,
        ]);

    // 根据屏幕尺寸动态设置 Dropdown组件的宽度和高度、page-1的决定子类排列方向的类
    const resizeSetter = () => {
      const innerWidth = window.innerWidth;

      if (innerWidth <= 992) { // 移动端767.98
        // 黑字图片（未选中）
        imgUrlArray.value = [
            fortune,
            work_promotion,
            company_development,
            investment,
            interpersonal_relationships,
            helping_others,
            emotional_experience_marriage,
            who_can_help,
            seeking_assistance,
            bearing_children,
            physical_mental_health,
            medical_treatment,
            marriage,
            official_disputes,
            learning_exams,
            travel,
            vehicle_use,
            buying_renting_houses,
            ancestral_grave_relocation,
            feng_shui_changes,
            move_omens,
            lost_items,
            tattoos_scars,
            
            making_new_friends_contacting_old_friends,
            unfair_improper_actions,
            skill_enhancement,
            living_with_others,

            family_member_passing,
            resignation,

            adopting_abandoning_animals,
            losing_people_pets,
            weather_impact_on_major_events,
            harming_animals,
            loss_damage_of_items,
        ];
        // 备份 黑字图片（未选中） 
        imgUrlArray_backup.value = [
            fortune,
            work_promotion,
            company_development,
            investment,
            interpersonal_relationships,
            helping_others,
            emotional_experience_marriage,
            who_can_help,
            seeking_assistance,
            bearing_children,
            physical_mental_health,
            medical_treatment,
            marriage,
            official_disputes,
            learning_exams,
            travel,
            vehicle_use,
            buying_renting_houses,
            ancestral_grave_relocation,
            feng_shui_changes,
            move_omens,
            lost_items,
            tattoos_scars,
            
            making_new_friends_contacting_old_friends,
            unfair_improper_actions,
            skill_enhancement,
            living_with_others,
            family_member_passing,
            resignation,

            adopting_abandoning_animals,
            losing_people_pets,
            weather_impact_on_major_events,
            harming_animals,
            loss_damage_of_items,
        ]; 
        // 白字图片（选中）
        imgUrlArray_white.value = [
            fortune_white,
            work_promotion_white,
            company_development_white,
            investment_white,
            interpersonal_relationships_white,
            helping_others_white,
            emotional_experience_marriage_white,
            who_can_help_white,
            seeking_assistance_white,
            bearing_children_white,
            physical_mental_health_white,
            medical_treatment_white,
            marriage_white,
            official_disputes_white,
            learning_exams_white,
            travel_white,
            vehicle_use_white,
            buying_renting_houses_white,
            ancestral_grave_relocation_white,
            feng_shui_changes_white,
            move_omens_white,
            lost_items_white,
            tattoos_scars_white,
            
            making_new_friends_contacting_old_friends_white,
            unfair_improper_actions_white,
            skill_enhancement_white,
            living_with_others_white,
            family_member_passing_white,
            resignation_white,
            
            adopting_abandoning_animals_white,
            losing_people_pets_white,
            weather_impact_on_major_events_white,
            harming_animals_white,
            loss_damage_of_items_white,
        ];

      } else if (innerWidth >= 992) {
            // 黑字图片（未选中）
            imgUrlArray.value = [
                fortune,
                work_promotion,
                company_development,
                investment,
                interpersonal_relationships,
                helping_others,
                emotional_experience_marriage,
                who_can_help,
                seeking_assistance,
                bearing_children,
                physical_mental_health,
                medical_treatment,
                marriage,
                official_disputes,
                learning_exams,
                travel,
                vehicle_use,
                buying_renting_houses,
                ancestral_grave_relocation,
                feng_shui_changes,
                move_omens,
                lost_items,
                tattoos_scars,
                resignation,
                making_new_friends_contacting_old_friends,
                unfair_improper_actions,
                skill_enhancement,
                living_with_others,
                family_member_passing,
                adopting_abandoning_animals,
                losing_people_pets,
                weather_impact_on_major_events,
                harming_animals,
                loss_damage_of_items,
            ];
            // 备份 黑字图片（未选中） 
            imgUrlArray_backup.value = [
                fortune,
                work_promotion,
                company_development,
                investment,
                interpersonal_relationships,
                helping_others,
                emotional_experience_marriage,
                who_can_help,
                seeking_assistance,
                bearing_children,
                physical_mental_health,
                medical_treatment,
                marriage,
                official_disputes,
                learning_exams,
                travel,
                vehicle_use,
                buying_renting_houses,
                ancestral_grave_relocation,
                feng_shui_changes,
                move_omens,
                lost_items,
                tattoos_scars,
                
                making_new_friends_contacting_old_friends,
                unfair_improper_actions,
                skill_enhancement,
                living_with_others,
                family_member_passing,
                resignation,

                adopting_abandoning_animals,
                losing_people_pets,
                weather_impact_on_major_events,
                harming_animals,
                loss_damage_of_items,
            ]; 
            // 白字图片（选中）
            imgUrlArray_white.value = [
                fortune_white,
                work_promotion_white,
                company_development_white,
                investment_white,
                interpersonal_relationships_white,
                helping_others_white,
                emotional_experience_marriage_white,
                who_can_help_white,
                seeking_assistance_white,
                bearing_children_white,
                physical_mental_health_white,
                medical_treatment_white,
                marriage_white,
                official_disputes_white,
                learning_exams_white,
                travel_white,
                vehicle_use_white,
                buying_renting_houses_white,
                ancestral_grave_relocation_white,
                feng_shui_changes_white,
                move_omens_white,
                lost_items_white,
                tattoos_scars_white,
                
                making_new_friends_contacting_old_friends_white,
                unfair_improper_actions_white,
                skill_enhancement_white,
                living_with_others_white,
                family_member_passing_white,
                resignation_white,
                
                adopting_abandoning_animals_white,
                losing_people_pets_white,
                weather_impact_on_major_events_white,
                harming_animals_white,
                loss_damage_of_items_white,
            ];
      }

    };
    resizeSetter() // 初始化时设置一次
    window.addEventListener('resize', resizeSetter) // 监听窗口尺寸变化
    onUnmounted(() => {window.removeEventListener('resize', resizeSetter) }) // 清理窗口尺寸变化事件监听器



        // 保存 选项 是否被选中的
        const chooseIcon = ref(imgUrlArray.value.map(() => unChooseIcon)); //  图标
        const bgColorItem = ref(imgUrlArray.value.map(() => bgColor.unBgColor)); // 背景颜色

        // 页数
        const pageNum = ref();

        // 把选项状态切换成未选中的方法
        function resetChooseIcon(index) {
            // 背景颜色切换
            bgColorItem.value[index] = bgColorItem.value[index] === bgColor.hvBgColor ? bgColor.unBgColor : bgColor.hvBgColor;
            // 图标切换
            chooseIcon.value[index] = chooseIcon.value[index] === unChooseIcon ? hvChooseIcon : unChooseIcon;
            if(pageNum.value === 5) {
                // 文字图片切换
                imgUrlArray.value[index] = imgUrlArray.value[index] === imgUrlArray_white.value[index] ? imgUrlArray_backup.value[index] : imgUrlArray_white.value[index];
            } else if (pageNum.value === 6) {
                // 文字图片切换
                paths.value[index] = paths.value[index] === paths_white.value[index] ? paths_backup.value[index] : paths_white.value[index];
            }
            // console.log('颜色：', decodeURI(bgColorItem.value[index]))
            // console.log('图标：', decodeURI(chooseIcon.value[index]))
            // console.log('图片：', decodeURI(imgUrlArray.value[index]))
        }

        // 未选中
        function to_blue(index) {
            // 背景颜色切换
            bgColorItem.value[index] = bgColor.unBgColor
            // 图标切换
            chooseIcon.value[index] = unChooseIcon;
            // 文字图片切换
            if(pageNum.value === 5) {
                imgUrlArray.value[index] = imgUrlArray_backup.value[index]
            } else if (pageNum.value === 6) {
                paths.value[index] = paths_backup.value[index]
            }
        }
        // 选中
        function to_white(index) {
            // 背景颜色切换
            bgColorItem.value[index] = bgColor.hvBgColor
            // 图标切换
            chooseIcon.value[index] = hvChooseIcon;
            // 文字图片切换
            if(pageNum.value === 5) {
                imgUrlArray.value[index] = imgUrlArray_white.value[index]
            } else if (pageNum.value === 6) {
                paths.value[index] = paths_white.value[index]
            }
        }
        

        // 中文名和编号的映射处理
        function idcnMapHandler(cnString) {
            const map = {
                '财运如何': '1',
                '工作官运': '2',
                '公司发展': '3',
                '投资': '4',
                '情感体验和婚姻婚外情': '5',
                '人际关系': '6',
                '谁能帮你解决问题': '7',
                '求人办事': '8',
                '生育子女': '9',
                '身心健康': '10',
                '伤病治疗': '11',
                '嫁娶': '12',
                '官灾是非': '13',
                '学习考试过关': '14',
                '旅游出行': '15',
                '车辆使用': '16',
                '买卖房屋': '17',
                '迁移祖先坟墓': '18',
                '风水变化': '19',
                '搬迁事情的吉凶预兆': '20',
                '失物找寻': '21',
                '纹身（伤疤）': '22',
                '结交新友联络旧友': '23',
                '帮助他人': '24',
                '做了不公平不正当甚至是害人的事情': '25',
                '辞职': '26',
                '技能修养提升': '27',
                '与人同室居住': '28',
                '亲人去世': '29',
                '杀害伤害动物': '30',
                '物品的丢失损毁': '31',
                '收养（或弃养）动物': '32',
                '人和动物与你走失': '33',
                '做大事时的天气影响': '34'
            };
            return map[cnString] || null; // 或者 throw new Error("Invalid input");
        }

        // 保存选中的选项的编号
        const ids = ref([]);

        // 保存选中的选项的名字
        const names = ref([]);

        // 保存选中的选项的路径（luck-analysis-6.vue）
        const paths = ref([]);
        const paths_backup = ref([]);
        const paths_white = ref([]);

        // 最后被选元素的索引（主要用于关闭数选框时恢复为未选中样式）
        const lastSelectedIndex = ref(-1);

        // 获取选中后的选项路径
        function getSelectedPaths() {
            paths.value = names.value.map((name) => {
                return "/assets/image/img/font_blue/recent_luck/" + name + ".png";    
            })
            
            paths_backup.value = names.value.map((name) => {
                return "/assets/image/img/font_blue/recent_luck/" + name + ".png";    
            })

            paths_white.value = names.value.map((name) => {
                return "/assets/image/img/font_white/recent_luck/" + name + ".png";    
            })
            console.log('初始化完毕')
            console.log( paths.value)
        }


        return {
            pageNum,
            imgUrlArray,
            imgUrlArray_backup,
            imgUrlArray_white,
            chooseIcon,
            bgColorItem,
            ids,
            names,
            paths,
            paths_backup,
            paths_white,
            lastSelectedIndex,


            resetChooseIcon,
            idcnMapHandler,
            getSelectedPaths,
            to_blue,
            to_white,
        } 
    })